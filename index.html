<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ú® My 2026 Command Center (fixed background + settings tab + 100+ hobbies)</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-card: #334155;
            --bg-elevated: #475569;
            --text-primary: #f8fafc;
            --text-secondary: #94a3b8;
            --accent-primary: #3b82f6;
            --accent-secondary: #8b5cf6;
            --accent-success: #10b981;
            --accent-warning: #f59e0b;
            --accent-danger: #ef4444;
            --accent-pink: #ec4899;
            --accent-cyan: #06b6d4;
            --border-color: #475569;
            --glass-bg: rgba(30, 41, 59, 0.7);
        }

        /* background system - fixed */
        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
            position: relative;
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%);
            background-attachment: fixed;
        }
        /* custom background overlay */
        body.custom-bg {
            background: none;  /* remove gradient so image shows */
        }
        body.custom-bg::before {
            content: '';
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: var(--user-bg);
            background-size: var(--bg-size, cover);
            background-position: center;
            background-repeat: no-repeat;
            filter: brightness(0.4) blur(2px);
            z-index: -2;
        }
        body.custom-bg::after {
            content: '';
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%);
            opacity: 0.7;  /* semi-transparent overlay for readability */
            z-index: -1;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Quick Access Bar */
        .quick-access {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 12px;
            z-index: 1000;
        }

        .fab {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            font-size: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.4);
            transition: all 0.3s;
            position: relative;
        }

        .fab:hover {
            transform: scale(1.1) rotate(5deg);
        }

        .fab-journal {
            background: linear-gradient(135deg, var(--accent-pink), var(--accent-secondary));
            color: white;
        }

        .fab-check {
            background: linear-gradient(135deg, var(--accent-success), var(--accent-cyan));
            color: white;
        }

        .fab-pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7); }
            50% { box-shadow: 0 0 0 15px rgba(16, 185, 129, 0); }
        }

        /* Header Styles */
        .header {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 24px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.4);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .header-top {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 30px;
            align-items: center;
            margin-bottom: 20px;
        }

        @media (max-width: 968px) {
            .header-top {
                grid-template-columns: 1fr;
                text-align: center;
            }
        }

        .datetime-section {
            text-align: center;
        }

        .time-display {
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(59, 130, 246, 0.3);
            letter-spacing: -2px;
        }

        .date-display {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-top: 5px;
            font-weight: 500;
        }

        .day-indicator {
            display: inline-block;
            padding: 4px 12px;
            background: var(--accent-primary);
            color: white;
            border-radius: 20px;
            font-size: 0.85rem;
            margin-top: 8px;
            font-weight: 600;
        }

        .quote-section {
            text-align: center;
            padding: 0 20px;
            position: relative;
        }

        .quote-text {
            font-style: italic;
            font-size: 1.3rem;
            color: var(--text-primary);
            margin-bottom: 10px;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.4;
        }

        .quote-author {
            color: var(--accent-secondary);
            font-size: 0.95rem;
            font-weight: 500;
        }

        .quote-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }

        .year-progress-section {
            text-align: center;
        }

        .year-progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .progress-bar {
            width: 100%;
            height: 14px;
            background: var(--bg-card);
            border-radius: 7px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-primary), var(--accent-secondary), var(--accent-pink));
            border-radius: 7px;
            transition: width 0.5s ease;
            position: relative;
            overflow: hidden;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Daily Status Strip */
        .daily-strip {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .status-card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s;
            cursor: pointer;
        }

        .status-card:hover {
            transform: translateY(-3px);
            border-color: var(--accent-primary);
        }

        .status-card.active {
            border-color: var(--accent-success);
            background: rgba(16, 185, 129, 0.1);
        }

        .status-icon {
            font-size: 2rem;
            margin-bottom: 8px;
        }

        .status-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .status-value {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-top: 4px;
        }

        /* Streak Display */
        .streak-display {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
        }

        .streak-item {
            text-align: center;
        }

        .streak-number {
            font-size: 2rem;
            font-weight: 800;
            color: var(--accent-warning);
        }

        .streak-label {
            font-size: 0.85rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Events & Focus */
        .header-bottom {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .header-bottom {
                grid-template-columns: 1fr;
            }
        }

        .events-preview {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 16px;
        }

        .events-preview h3 {
            color: var(--accent-warning);
            margin-bottom: 12px;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .event-preview-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--border-color);
            font-size: 0.9rem;
            align-items: center;
        }

        .event-preview-item:last-child {
            border-bottom: none;
        }

        .event-countdown {
            color: var(--accent-primary);
            font-weight: 600;
            background: rgba(59, 130, 246, 0.1);
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.85rem;
        }

        .focus-section {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 16px;
        }

        .focus-label {
            color: var(--accent-success);
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .focus-input {
            width: 100%;
            padding: 12px 16px;
            background: var(--bg-primary);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.3s;
        }

        .focus-input:focus {
            outline: none;
            border-color: var(--accent-success);
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 24px;
            flex-wrap: wrap;
            background: var(--bg-secondary);
            padding: 8px;
            border-radius: 16px;
        }

        .tab-btn {
            padding: 12px 24px;
            background: transparent;
            border: none;
            border-radius: 12px;
            color: var(--text-secondary);
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            flex: 1;
            min-width: 100px;
            position: relative;
            overflow: hidden;
        }

        .tab-btn:hover {
            color: var(--text-primary);
            background: rgba(255,255,255,0.05);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            color: white;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Card Styles */
        .card {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 20px;
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }

        .card-title {
            font-size: 1.4rem;
            margin-bottom: 20px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 700;
        }

        /* Daily Journal Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--bg-secondary);
            border-radius: 24px;
            width: 100%;
            max-width: 800px;
            max-height: 90vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            border: 1px solid var(--border-color);
            box-shadow: 0 25px 50px rgba(0,0,0,0.5);
        }

        .modal-header {
            padding: 24px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .modal-close:hover {
            background: var(--bg-card);
            color: var(--text-primary);
        }

        .modal-body {
            padding: 24px;
            overflow-y: auto;
            flex: 1;
        }

        .journal-prompts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        .prompt-btn {
            padding: 16px;
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-secondary);
            cursor: pointer;
            text-align: left;
            transition: all 0.3s;
            font-size: 0.95rem;
        }

        .prompt-btn:hover {
            border-color: var(--accent-primary);
            color: var(--text-primary);
            background: rgba(59, 130, 246, 0.1);
        }

        .journal-textarea {
            width: 100%;
            min-height: 300px;
            padding: 20px;
            background: var(--bg-primary);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-primary);
            font-size: 1.1rem;
            line-height: 1.8;
            resize: vertical;
            font-family: inherit;
        }

        .journal-textarea:focus {
            outline: none;
            border-color: var(--accent-pink);
        }

        .journal-history {
            margin-top: 20px;
        }

        .journal-entry {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            border-left: 4px solid var(--accent-pink);
            cursor: pointer;
            transition: all 0.3s;
        }

        .journal-entry:hover {
            transform: translateX(5px);
        }

        .journal-date {
            font-size: 0.85rem;
            color: var(--accent-pink);
            font-weight: 600;
            margin-bottom: 8px;
        }

        .journal-preview {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.5;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        /* Habits Styles */
        .habits-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 16px;
        }

        .habit-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 20px;
            border: 2px solid transparent;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .habit-card:hover {
            transform: translateY(-3px);
            border-color: var(--accent-primary);
        }

        .habit-card.completed {
            border-color: var(--accent-success);
            background: rgba(16, 185, 129, 0.1);
        }

        .habit-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 12px;
        }

        .habit-title {
            font-weight: 700;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .habit-streak {
            display: flex;
            align-items: center;
            gap: 4px;
            color: var(--accent-warning);
            font-weight: 700;
            font-size: 0.95rem;
        }

        .habit-check {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 3px solid var(--border-color);
            background: transparent;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            transition: all 0.3s;
            margin: 15px auto;
            color: var(--text-secondary);
        }

        .habit-check:hover {
            border-color: var(--accent-success);
            transform: scale(1.1);
            color: var(--accent-success);
        }

        .habit-check.checked {
            background: var(--accent-success);
            border-color: var(--accent-success);
            color: white;
            animation: checkPop 0.3s;
        }

        @keyframes checkPop {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        .habit-stats {
            display: flex;
            justify-content: space-around;
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--border-color);
        }

        .habit-stat {
            text-align: center;
        }

        .habit-stat-value {
            font-weight: 700;
            color: var(--text-primary);
            font-size: 1.1rem;
        }

        .delete-habit {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--accent-danger);
            color: white;
            border: none;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            font-size: 18px;
            line-height: 1;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0.8;
            transition: 0.2s;
        }
        .delete-habit:hover {
            opacity: 1;
            transform: scale(1.1);
        }

        .weekly-tracker {
            display: flex;
            gap: 6px;
            justify-content: center;
            margin-top: 12px;
        }

        .day-dot {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--bg-elevated);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            color: var(--text-secondary);
            font-weight: 600;
        }

        .day-dot.done {
            background: var(--accent-success);
            color: white;
        }

        .day-dot.today {
            box-shadow: 0 0 0 2px var(--accent-primary);
        }

        /* Morning Routine Checklist */
        .routine-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .routine-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: var(--bg-card);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .routine-item:hover {
            border-color: var(--accent-primary);
        }

        .routine-item.completed {
            opacity: 0.6;
            border-color: var(--accent-success);
        }

        .routine-checkbox {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: 2px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            flex-shrink: 0;
            color: transparent;
        }

        .routine-item.completed .routine-checkbox {
            background: var(--accent-success);
            border-color: var(--accent-success);
            color: white;
        }

        .routine-content {
            flex: 1;
        }

        .routine-title {
            font-weight: 600;
            margin-bottom: 2px;
        }

        .routine-desc {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* Form Styles */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-bottom: 6px;
            font-weight: 500;
        }

        input, select, textarea {
            padding: 12px 16px;
            background: var(--bg-primary);
            border: 2px solid var(--border-color);
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 0.95rem;
            transition: all 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--accent-primary);
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 0.95rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            color: white;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
        }

        .btn-danger {
            background: var(--accent-danger);
            color: white;
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        .btn-success {
            background: var(--accent-success);
            color: white;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.85rem;
        }

        /* Goals Styles */
        .goals-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 25px;
        }

        .summary-card {
            background: var(--bg-card);
            padding: 24px;
            border-radius: 16px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .summary-card:hover {
            border-color: var(--accent-primary);
            transform: translateY(-2px);
        }

        .summary-value {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .summary-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 5px;
            font-weight: 500;
        }

        .goal-item {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 16px;
            border-left: 4px solid var(--accent-primary);
            transition: all 0.3s;
        }

        .goal-item:hover {
            transform: translateX(5px);
        }

        .goal-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .goal-title {
            font-weight: 700;
            font-size: 1.15rem;
        }

        .goal-category {
            display: inline-block;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .cat-health { background: rgba(16, 185, 129, 0.2); color: var(--accent-success); }
        .cat-career { background: rgba(59, 130, 246, 0.2); color: var(--accent-primary); }
        .cat-finance { background: rgba(245, 158, 11, 0.2); color: var(--accent-warning); }
        .cat-learning { background: rgba(139, 92, 246, 0.2); color: var(--accent-secondary); }
        .cat-social { background: rgba(236, 72, 153, 0.2); color: var(--accent-pink); }

        .goal-controls {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .progress-slider {
            flex: 1;
            min-width: 200px;
        }

        input[type="range"] {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            background: var(--bg-primary);
            border-radius: 4px;
            outline: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(59, 130, 246, 0.3);
        }

        .progress-text {
            min-width: 50px;
            text-align: right;
            font-weight: 700;
            color: var(--accent-primary);
            font-size: 1.1rem;
        }

        .checkbox-complete {
            width: 24px;
            height: 24px;
            cursor: pointer;
            accent-color: var(--accent-success);
        }

        /* Money Styles */
        .balance-display {
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary), var(--accent-pink));
            border-radius: 24px;
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
        }

        .balance-display::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            right: -50%;
            bottom: -50%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 60%);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .balance-label {
            color: rgba(255,255,255,0.9);
            font-size: 1.1rem;
            margin-bottom: 10px;
            font-weight: 500;
            position: relative;
        }

        .balance-amount {
            font-size: 3.5rem;
            font-weight: 800;
            color: white;
            position: relative;
            text-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }

        .transaction-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: var(--bg-card);
            border-radius: 12px;
            margin-bottom: 12px;
            flex-wrap: wrap;
            gap: 10px;
            transition: all 0.3s;
        }

        .transaction-item:hover {
            transform: translateX(5px);
        }

        .transaction-info {
            flex: 1;
        }

        .transaction-desc {
            font-weight: 600;
            margin-bottom: 4px;
            font-size: 1.05rem;
        }

        .transaction-meta {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .transaction-amount {
            font-size: 1.2rem;
            font-weight: 700;
        }

        .amount-income { color: var(--accent-success); }
        .amount-expense { color: var(--accent-danger); }

        .category-badges {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 20px;
        }

        .badge {
            padding: 10px 18px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            background: var(--bg-card);
            border: 2px solid var(--border-color);
            transition: all 0.3s;
        }

        .badge:hover {
            transform: translateY(-2px);
            border-color: var(--accent-primary);
        }

        /* Hobbies Styles */
        .filter-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .filter-btn {
            padding: 10px 20px;
            border-radius: 25px;
            border: 2px solid var(--border-color);
            background: var(--bg-card);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .filter-btn:hover {
            border-color: var(--accent-primary);
            color: var(--text-primary);
        }

        .filter-btn.active {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            color: white;
            border-color: transparent;
        }

        .hobbies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 16px;
            max-height: 600px;
            overflow-y: auto;
            padding-right: 10px;
        }

        .hobby-item {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 20px;
            border: 2px solid transparent;
            transition: all 0.3s;
        }

        .hobby-item:hover {
            border-color: var(--accent-primary);
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .hobby-name {
            font-weight: 700;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .hobby-category {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 16px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        .hobby-status {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .status-btn {
            padding: 8px 14px;
            border-radius: 8px;
            border: 2px solid var(--border-color);
            background: var(--bg-primary);
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            font-weight: 600;
        }

        .status-btn:hover {
            transform: scale(1.05);
        }

        .status-btn.active {
            color: white;
            border-color: transparent;
        }

        .status-interested.active { background: linear-gradient(135deg, #f59e0b, #d97706); }
        .status-trying.active { background: linear-gradient(135deg, #ef4444, #dc2626); }
        .status-mastered.active { background: linear-gradient(135deg, #10b981, #059669); }

        /* Schedule Styles */
        .event-list {
            max-height: 500px;
            overflow-y: auto;
        }

        .event-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: var(--bg-card);
            border-radius: 16px;
            margin-bottom: 14px;
            border-left: 4px solid var(--accent-secondary);
            flex-wrap: wrap;
            gap: 15px;
            transition: all 0.3s;
        }

        .event-item:hover {
            transform: translateX(5px);
        }

        .event-date-box {
            text-align: center;
            min-width: 70px;
            padding: 10px;
            background: var(--bg-primary);
            border-radius: 12px;
        }

        .event-day {
            font-size: 1.8rem;
            font-weight: 800;
            color: var(--accent-primary);
            line-height: 1;
        }

        .event-month {
            font-size: 0.85rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            font-weight: 600;
            margin-top: 4px;
        }

        .event-details {
            flex: 1;
            min-width: 200px;
        }

        .event-title {
            font-weight: 700;
            font-size: 1.15rem;
            margin-bottom: 6px;
        }

        .event-countdown-large {
            color: var(--accent-secondary);
            font-weight: 600;
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .event-passed {
            opacity: 0.5;
            border-left-color: var(--text-secondary);
        }

        .event-today {
            border-left-color: var(--accent-success);
            background: rgba(16, 185, 129, 0.1);
            animation: glow 2s infinite;
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px rgba(16, 185, 129, 0.3); }
            50% { box-shadow: 0 0 20px rgba(16, 185, 129, 0.5); }
        }

        /* Daily Review */
        .daily-review {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(236, 72, 153, 0.1));
            border: 2px solid var(--accent-secondary);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .review-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .review-item {
            text-align: center;
            padding: 16px;
            background: var(--bg-card);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .review-item:hover {
            transform: scale(1.05);
            border-color: var(--accent-primary);
        }

        .review-emoji {
            font-size: 2.5rem;
            margin-bottom: 8px;
            display: inline-block;
            transition: transform 0.2s;
        }

        .review-item:hover .review-emoji {
            transform: scale(1.2);
        }

        .review-emoji.selected {
            animation: bounce 0.5s;
            filter: drop-shadow(0 0 10px currentColor);
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.4); }
        }

        /* Insights Card */
        .insights-card {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(6, 182, 212, 0.1));
            border: 2px solid var(--accent-primary);
        }

        .insight-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 16px;
            background: var(--bg-card);
            border-radius: 12px;
            margin-bottom: 12px;
        }

        .insight-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            background: var(--bg-primary);
        }

        .insight-content h4 {
            margin-bottom: 4px;
            color: var(--text-primary);
        }

        .insight-content p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Calendar Styles */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-top: 20px;
        }
        .calendar-day-header {
            text-align: center;
            font-weight: 600;
            color: var(--accent-secondary);
            padding: 5px;
        }
        .calendar-cell {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 12px 5px;
            text-align: center;
            cursor: pointer;
            transition: 0.2s;
            min-height: 80px;
            display: flex;
            flex-direction: column;
            align-items: center;
            border: 2px solid transparent;
        }
        .calendar-cell:hover {
            border-color: var(--accent-primary);
            transform: scale(0.98);
        }
        .calendar-cell.today {
            border-color: var(--accent-success);
            box-shadow: 0 0 0 2px var(--accent-success);
        }
        .calendar-day-number {
            font-weight: 700;
            font-size: 1.1rem;
        }
        .calendar-dots {
            display: flex;
            gap: 3px;
            justify-content: center;
            margin-top: 5px;
        }
        .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }
        .dot.habit { background: var(--accent-success); }
        .dot.journal { background: var(--accent-pink); }
        .dot.money { background: var(--accent-warning); }
        .dot.rating { background: var(--accent-cyan); }

        .day-detail-modal .modal-body {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .detail-section {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 16px;
        }
        .detail-section h4 {
            color: var(--accent-secondary);
            margin-bottom: 8px;
        }

        /* Settings tab */
        .settings-card {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 20px;
        }
        .settings-card h3 {
            color: var(--accent-cyan);
            margin-bottom: 16px;
        }

        /* Personal name in header */
        .personal-name-badge {
            display: inline-block;
            background: var(--accent-primary);
            padding: 6px 18px;
            border-radius: 40px;
            font-weight: 600;
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-secondary);
            margin-top: 60px;
            border-top: 2px solid var(--border-color);
        }

        .footer-message {
            font-size: 1.2rem;
            font-style: italic;
            margin-bottom: 16px;
            color: var(--accent-primary);
            font-weight: 500;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-secondary);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--accent-primary);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--accent-secondary);
        }

        /* Animations */
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-in {
            animation: slideIn 0.5s ease-out;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .time-display { font-size: 2rem; }
            .quote-text { font-size: 1.1rem; }
            .balance-amount { font-size: 2rem; }
            .header-top { grid-template-columns: 1fr; }
            .header-bottom { grid-template-columns: 1fr; }
            .quick-access { bottom: 10px; right: 10px; }
            .fab { width: 50px; height: 50px; font-size: 20px; }
        }

        .save-indicator {
            position: fixed;
            bottom: 100px;
            right: 20px;
            background: var(--accent-success);
            color: white;
            padding: 12px 24px;
            border-radius: 12px;
            opacity: 0;
            transition: all 0.3s;
            pointer-events: none;
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            transform: translateY(20px);
        }

        .save-indicator.show {
            opacity: 1;
            transform: translateY(0);
        }

        /* Confetti Animation */
        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: var(--accent-primary);
            position: absolute;
            animation: confetti-fall 3s linear forwards;
            z-index: 9999;
        }

        @keyframes confetti-fall {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 1; }
            100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }

        /* Heatmap for habits */
        .heatmap {
            display: grid;
            grid-template-columns: repeat(53, 1fr);
            gap: 3px;
            margin-top: 20px;
            overflow-x: auto;
            padding-bottom: 10px;
        }

        .heatmap-cell {
            width: 12px;
            height: 12px;
            border-radius: 2px;
            background: var(--bg-elevated);
        }

        .heatmap-cell.level-1 { background: rgba(16, 185, 129, 0.3); }
        .heatmap-cell.level-2 { background: rgba(16, 185, 129, 0.6); }
        .heatmap-cell.level-3 { background: var(--accent-success); }

        .heatmap-labels {
            display: flex;
            justify-content: space-between;
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: 8px;
        }
    </style>
</head>
<body>
    <!-- Quick Access Floating Buttons -->
    <div class="quick-access">
        <button class="fab fab-check fab-pulse" onclick="switchToHabits()" title="Quick Habit Check">‚ö°</button>
        <button class="fab fab-journal" onclick="openJournal()" title="Daily Journal">üìù</button>
    </div>

    <div class="container">
        <!-- Header Panel with personal name badge (controls moved to settings) -->
        <div class="header animate-in">
            <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px;">
                <div class="personal-name-badge" id="personalNameDisplay">My Dashboard</div>
                <div></div> <!-- empty for spacing -->
            </div>
            <div class="header-top">
                <div class="datetime-section">
                    <div class="time-display" id="timeDisplay">00:00:00</div>
                    <div class="date-display" id="dateDisplay">Loading...</div>
                    <div class="day-indicator" id="dayIndicator">Day 1 of 2026</div>
                </div>
                
                <div class="quote-section">
                    <div class="quote-text" id="quoteText">"The only way to do great work is to love what you do."</div>
                    <div class="quote-author" id="quoteAuthor">‚Äî Steve Jobs</div>
                    <div class="quote-controls">
                        <button class="btn btn-small" onclick="changeQuote(-1)">‚Üê Prev</button>
                        <button class="btn btn-primary btn-small" onclick="resetQuote()">Today</button>
                        <button class="btn btn-small" onclick="changeQuote(1)">Next ‚Üí</button>
                    </div>
                </div>
                
                <div class="year-progress-section">
                    <div class="year-progress-label">
                        <span>2026 Progress</span>
                        <span id="yearPercent">0%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="yearProgressBar" style="width: 0%"></div>
                    </div>
                    <div style="text-align: center; margin-top: 8px; font-size: 0.85rem; color: var(--text-secondary);">
                        <span id="daysRemaining">0</span> days remaining
                    </div>
                </div>
            </div>

            <!-- Daily Status Strip -->
            <div class="daily-strip">
                <div class="status-card" onclick="switchToHabits()" id="habitsStatus">
                    <div class="status-icon">‚úÖ</div>
                    <div class="status-label">Habits Today</div>
                    <div class="status-value" id="habitsTodayCount">0/0</div>
                </div>
                <div class="status-card" onclick="openJournal()" id="journalStatus">
                    <div class="status-icon">üìù</div>
                    <div class="status-label">Journal</div>
                    <div class="status-value" id="journalTodayStatus">Not written</div>
                </div>
                <div class="status-card" onclick="switchToGoals()">
                    <div class="status-icon">üéØ</div>
                    <div class="status-label">Active Goals</div>
                    <div class="status-value" id="activeGoalsCount">0</div>
                </div>
                <div class="status-card" onclick="switchToMoney()">
                    <div class="status-icon">üí∞</div>
                    <div class="status-label">Balance</div>
                    <div class="status-value" id="headerBalance">$0</div>
                </div>
            </div>

            <!-- Streak Display -->
            <div class="streak-display">
                <div class="streak-item">
                    <div class="streak-number" id="habitStreak">0</div>
                    <div class="streak-label">Day Streak</div>
                </div>
                <div class="streak-item">
                    <div class="streak-number" id="journalStreak">0</div>
                    <div class="streak-label">Journal Streak</div>
                </div>
                <div class="streak-item">
                    <div class="streak-number" id="perfectDays">0</div>
                    <div class="streak-label">Perfect Days</div>
                </div>
            </div>
            
            <div class="header-bottom">
                <div class="events-preview">
                    <h3>üìÖ Upcoming Events</h3>
                    <div id="eventsPreview">No upcoming events</div>
                </div>
                
                <div class="focus-section">
                    <label class="focus-label">üéØ Today's Focus</label>
                    <input type="text" class="focus-input" id="todayFocus" placeholder="What is your main focus for today?" onchange="saveFocus()">
                </div>
            </div>
        </div>

        <!-- Navigation Tabs (added Settings tab) -->
        <div class="nav-tabs">
            <button class="tab-btn active" data-tab="today" onclick="switchTab('today')">‚òÄÔ∏è Today</button>
            <button class="tab-btn" data-tab="habits" onclick="switchTab('habits')">üîÑ Habits</button>
            <button class="tab-btn" data-tab="goals" onclick="switchTab('goals')">üéØ Goals</button>
            <button class="tab-btn" data-tab="money" onclick="switchTab('money')">üí∞ Money</button>
            <button class="tab-btn" data-tab="hobbies" onclick="switchTab('hobbies')">üé® Hobbies</button>
            <button class="tab-btn" data-tab="schedule" onclick="switchTab('schedule')">üìÖ Schedule</button>
            <button class="tab-btn" data-tab="calendar" onclick="switchTab('calendar')">üìÜ Calendar</button>
            <button class="tab-btn" data-tab="settings" onclick="switchTab('settings')">‚öôÔ∏è Settings</button>
        </div>

        <!-- TODAY Tab -->
        <div id="today" class="tab-content active">
            <div class="card">
                <h2 class="card-title">üåÖ Morning Routine</h2>
                <p style="color: var(--text-secondary); margin-bottom: 20px;">Start your day right. Check off items as you complete them.</p>
                <div class="routine-list" id="morningRoutine"></div>
                <button class="btn btn-primary" onclick="addRoutineItem()" style="margin-top: 16px; width: 100%;">+ Add Routine Item</button>
            </div>

            <div class="daily-review">
                <h2 class="card-title" style="margin-bottom: 10px;">üåô Evening Review</h2>
                <p style="color: var(--text-secondary); margin-bottom: 16px;">How was your day? Rate it to track your mood over time.</p>
                <div class="review-grid" id="dailyRating">
                    <div class="review-item" onclick="setDayRating(1)">
                        <div class="review-emoji" data-rating="1">üò´</div>
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">Tough</div>
                    </div>
                    <div class="review-item" onclick="setDayRating(2)">
                        <div class="review-emoji" data-rating="2">üòï</div>
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">Okay</div>
                    </div>
                    <div class="review-item" onclick="setDayRating(3)">
                        <div class="review-emoji" data-rating="3">üòê</div>
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">Neutral</div>
                    </div>
                    <div class="review-item" onclick="setDayRating(4)">
                        <div class="review-emoji" data-rating="4">üôÇ</div>
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">Good</div>
                    </div>
                    <div class="review-item" onclick="setDayRating(5)">
                        <div class="review-emoji" data-rating="5">ü§©</div>
                        <div style="font-size: 0.85rem; color: var(--text-secondary);">Amazing</div>
                    </div>
                </div>
                <div id="todayRatingDisplay" style="text-align: center; margin-top: 16px; color: var(--text-secondary);"></div>
            </div>

            <div class="card insights-card">
                <h2 class="card-title">üí° Daily Insights</h2>
                <div id="dailyInsights">
                    <div class="insight-item">
                        <div class="insight-icon">üéØ</div>
                        <div class="insight-content">
                            <h4>Focus Reminder</h4>
                            <p id="insightFocus">Set your daily focus in the header above!</p>
                        </div>
                    </div>
                    <div class="insight-item">
                        <div class="insight-icon">‚è∞</div>
                        <div class="insight-content">
                            <h4>Up Next</h4>
                            <p id="insightEvent">No upcoming events scheduled</p>
                        </div>
                    </div>
                    <div class="insight-item">
                        <div class="insight-icon">üî•</div>
                        <div class="insight-content">
                            <h4>Motivation</h4>
                            <p id="insightMotivation">You're building great habits! Keep the momentum going.</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2 class="card-title">üìä Today's Snapshot</h2>
                <div class="goals-summary">
                    <div class="summary-card">
                        <div class="summary-value" id="todayHabitsDone">0</div>
                        <div class="summary-label">Habits Done</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-value" id="todayJournalWords">0</div>
                        <div class="summary-label">Journal Words</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-value" id="todayExpenses">$0</div>
                        <div class="summary-label">Spent Today</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-value" id="weekProgress">0%</div>
                        <div class="summary-label">Week Progress</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- HABITS Tab -->
        <div id="habits" class="tab-content">
            <div class="card">
                <h2 class="card-title">‚ûï Create New Habit</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Habit Name</label>
                        <input type="text" id="habitName" placeholder="e.g., Read 30 minutes">
                    </div>
                    <div class="form-group">
                        <label>Category</label>
                        <select id="habitCategory">
                            <option value="Health">Health</option>
                            <option value="Productivity">Productivity</option>
                            <option value="Mindfulness">Mindfulness</option>
                            <option value="Learning">Learning</option>
                            <option value="Social">Social</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Target (times per week)</label>
                        <input type="number" id="habitTarget" value="7" min="1" max="7">
                    </div>
                    <div class="form-group" style="display: flex; align-items: end;">
                        <button class="btn btn-primary" onclick="addHabit()">Create Habit</button>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2 class="card-title">üîÑ Your Habits</h2>
                <div class="habits-grid" id="habitsList"></div>
            </div>

            <div class="card">
                <h2 class="card-title">üî• Your Consistency Heatmap</h2>
                <p style="color: var(--text-secondary); margin-bottom: 16px;">Last 12 months of habit completion</p>
                <div class="heatmap" id="habitHeatmap"></div>
                <div class="heatmap-labels">
                    <span>Less</span>
                    <span style="display: flex; gap: 4px; align-items: center;">
                        <div style="width: 12px; height: 12px; background: var(--bg-elevated); border-radius: 2px;"></div>
                        <div style="width: 12px; height: 12px; background: rgba(16, 185, 129, 0.3); border-radius: 2px;"></div>
                        <div style="width: 12px; height: 12px; background: rgba(16, 185, 129, 0.6); border-radius: 2px;"></div>
                        <div style="width: 12px; height: 12px; background: var(--accent-success); border-radius: 2px;"></div>
                    </span>
                    <span>More</span>
                </div>
            </div>
        </div>

        <!-- Journal Modal -->
        <div class="modal-overlay" id="journalModal">
            <div class="modal">
                <div class="modal-header">
                    <div class="modal-title">üìù Daily Journal</div>
                    <button class="modal-close" onclick="closeJournal()">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="journal-prompts">
                        <button class="prompt-btn" onclick="usePrompt('What made you smile today?')">üòä What made you smile?</button>
                        <button class="prompt-btn" onclick="usePrompt('What challenged you today?')">üí™ What challenged you?</button>
                        <button class="prompt-btn" onclick="usePrompt('What are you grateful for?')">üôè What are you grateful for?</button>
                        <button class="prompt-btn" onclick="usePrompt('What did you learn today?')">üìö What did you learn?</button>
                        <button class="prompt-btn" onclick="usePrompt('How did you move closer to your goals?')">üéØ Progress toward goals</button>
                        <button class="prompt-btn" onclick="usePrompt('Free writing...')">‚úçÔ∏è Free writing</button>
                    </div>
                    
                    <textarea class="journal-textarea" id="journalEntry" placeholder="Write your thoughts here..."></textarea>
                    
                    <div style="display: flex; gap: 12px; margin-top: 16px;">
                        <button class="btn btn-primary" onclick="saveJournal()" style="flex: 1;">üíæ Save Entry</button>
                        <button class="btn btn-small" onclick="closeJournal()">Cancel</button>
                    </div>

                    <div class="journal-history">
                        <h3 style="margin-bottom: 16px; color: var(--text-secondary);">Recent Entries</h3>
                        <div id="journalHistory"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Goals Tab -->
        <div id="goals" class="tab-content">
            <div class="card">
                <h2 class="card-title">üìä Goals Overview</h2>
                <div class="goals-summary">
                    <div class="summary-card">
                        <div class="summary-value" id="avgProgress">0%</div>
                        <div class="summary-label">Average Progress</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-value" id="completedGoals">0</div>
                        <div class="summary-label">Completed</div>
                    </div>
                    <div class="summary-card">
                        <div class="summary-value" id="totalGoals">0</div>
                        <div class="summary-label">Total Goals</div>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2 class="card-title">‚ûï Add New Goal</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Goal Title</label>
                        <input type="text" id="goalTitle" placeholder="Enter goal title">
                    </div>
                    <div class="form-group">
                        <label>Category</label>
                        <select id="goalCategory">
                            <option value="Health">Health</option>
                            <option value="Career">Career</option>
                            <option value="Finance">Finance</option>
                            <option value="Learning">Learning</option>
                            <option value="Social">Social</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Due Date (Optional)</label>
                        <input type="date" id="goalDueDate">
                    </div>
                    <div class="form-group" style="display: flex; align-items: end;">
                        <button class="btn btn-primary" onclick="addGoal()">Add Goal</button>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2 class="card-title">üìù Your Goals</h2>
                <div id="goalsList"></div>
            </div>
        </div>

        <!-- Money Tab -->
        <div id="money" class="tab-content">
            <div class="balance-display">
                <div class="balance-label">Current Balance</div>
                <div class="balance-amount" id="balanceAmount">$0.00</div>
            </div>

            <div class="card">
                <h2 class="card-title">‚ûï Add Transaction</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Description</label>
                        <input type="text" id="transDesc" placeholder="e.g., Grocery shopping">
                    </div>
                    <div class="form-group">
                        <label>Amount</label>
                        <input type="number" id="transAmount" placeholder="0.00" step="0.01">
                    </div>
                    <div class="form-group">
                        <label>Category</label>
                        <select id="transCategory">
                            <option value="Food">Food</option>
                            <option value="Rent">Rent</option>
                            <option value="Fun">Fun</option>
                            <option value="Transport">Transport</option>
                            <option value="Income">Income</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Type</label>
                        <select id="transType">
                            <option value="expense">Expense</option>
                            <option value="income">Income</option>
                        </select>
                    </div>
                    <div class="form-group" style="display: flex; align-items: end;">
                        <button class="btn btn-primary" onclick="addTransaction()">Add Transaction</button>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2 class="card-title">üìà Category Breakdown</h2>
                <div class="category-badges" id="categoryBreakdown"></div>
            </div>

            <div class="card">
                <h2 class="card-title">üßæ Recent Transactions</h2>
                <div class="transaction-list" id="transactionList"></div>
            </div>
        </div>

        <!-- HOBBIES Tab (with 100+ default hobbies) -->
        <div id="hobbies" class="tab-content">
            <div class="card">
                <h2 class="card-title">‚ûï Add Custom Hobby</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Hobby Name</label>
                        <input type="text" id="hobbyName" placeholder="Enter hobby name">
                    </div>
                    <div class="form-group">
                        <label>Category</label>
                        <select id="hobbyCategory">
                            <option value="Creative">Creative</option>
                            <option value="Active">Active</option>
                            <option value="Relaxing">Relaxing</option>
                            <option value="Learning">Learning</option>
                            <option value="Social">Social</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group" style="display: flex; align-items: end;">
                        <button class="btn btn-primary" onclick="addCustomHobby()">Add Hobby</button>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2 class="card-title">üé® Your Hobbies (100+ preloaded)</h2>
                <div class="filter-buttons">
                    <button class="filter-btn active" onclick="filterHobbies('all', this)">All</button>
                    <button class="filter-btn" onclick="filterHobbies('interested', this)">‚ú® Interested</button>
                    <button class="filter-btn" onclick="filterHobbies('trying', this)">üî• Trying</button>
                    <button class="filter-btn" onclick="filterHobbies('mastered', this)">üèÜ Mastered</button>
                </div>
                <div class="hobbies-grid" id="hobbiesList"></div>
            </div>
        </div>

        <!-- Schedule Tab -->
        <div id="schedule" class="tab-content">
            <div class="card">
                <h2 class="card-title">‚ûï Add Event</h2>
                <div class="form-grid">
                    <div class="form-group">
                        <label>Event Title</label>
                        <input type="text" id="eventTitle" placeholder="e.g., Doctor Appointment">
                    </div>
                    <div class="form-group">
                        <label>Date</label>
                        <input type="date" id="eventDate">
                    </div>
                    <div class="form-group" style="display: flex; align-items: end;">
                        <button class="btn btn-primary" onclick="addEvent()">Add Event</button>
                    </div>
                </div>
            </div>

            <div class="card">
                <h2 class="card-title">üìÖ All Events</h2>
                <div class="event-list" id="eventsList"></div>
            </div>
        </div>

        <!-- CALENDAR Tab -->
        <div id="calendar" class="tab-content">
            <div class="card">
                <h2 class="card-title">üìÜ Your Data Calendar</h2>
                <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                    <button class="btn btn-small" onclick="changeMonth(-1)">‚óÄ Prev</button>
                    <span id="calendarMonthYear" style="font-size: 1.2rem; font-weight: 600;"></span>
                    <button class="btn btn-small" onclick="changeMonth(1)">Next ‚ñ∂</button>
                </div>
                <div class="calendar-grid" id="calendarGrid"></div>
            </div>
        </div>

        <!-- SETTINGS Tab (name + background) -->
        <div id="settings" class="tab-content">
            <div class="card">
                <h2 class="card-title">üë§ Personalization</h2>
                <div class="settings-card">
                    <h3>Your Name</h3>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <input type="text" id="userNameInput" placeholder="Enter your name" style="flex:1;">
                        <button class="btn btn-primary" onclick="setUserName()">Set Name</button>
                    </div>
                </div>
                <div class="settings-card">
                    <h3>Background Image</h3>
                    <p style="color: var(--text-secondary); margin-bottom: 10px;">Upload an image to set as background (it will fit automatically).</p>
                    <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                        <input type="file" id="bgUpload" accept="image/*" onchange="handleBgUpload(event)">
                        <select id="bgFit" onchange="changeBgFit(this.value)">
                            <option value="cover">Cover (fills screen)</option>
                            <option value="contain">Contain (fits entire image)</option>
                            <option value="fill">Fill (stretch)</option>
                        </select>
                        <button class="btn btn-danger" onclick="resetBg()">Reset to Default</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Day Detail Modal -->
        <div class="modal-overlay" id="dayDetailModal">
            <div class="modal day-detail-modal">
                <div class="modal-header">
                    <div class="modal-title" id="detailDateTitle">üìÖ Date</div>
                    <button class="modal-close" onclick="closeDayDetail()">√ó</button>
                </div>
                <div class="modal-body" id="dayDetailBody">
                    <!-- filled dynamically -->
                </div>
            </div>
        </div>

    </div> <!-- container end -->

    <div class="footer">
        <div class="footer-message">‚ÄúSmall steps every day‚Äù</div>
        <div>¬© 2026 My Command Center</div>
    </div>

    <script>
        // ----------------------------------- DATA & STATE ----------------------------------------
        const STORAGE_KEYS = {
            HABITS: 'commandCenter_habits',
            HABIT_LOG: 'commandCenter_habitLog',
            GOALS: 'commandCenter_goals',
            TRANSACTIONS: 'commandCenter_transactions',
            HOBBIES: 'commandCenter_hobbies',
            EVENTS: 'commandCenter_events',
            ROUTINE: 'commandCenter_routine',
            JOURNAL: 'commandCenter_journal',
            FOCUS: 'commandCenter_focus',
            RATINGS: 'commandCenter_ratings',
            USER_NAME: 'commandCenter_userName',
            BG_IMAGE: 'commandCenter_bgImage',
            BG_FIT: 'commandCenter_bgFit'
        };

        let habits = [];
        let habitLog = {};          // "YYYY-MM-DD": [{ habitId, done }]
        let goals = [];
        let transactions = [];
        let hobbies = [];
        let events = [];
        let routineItems = [
            { id: 'r1', title: 'Drink water', description: 'Start with a glass', completed: false },
            { id: 'r2', title: 'Meditate', description: '5 minutes', completed: false },
            { id: 'r3', title: 'Plan the day', description: 'Review goals', completed: false }
        ];
        let journalEntries = [];     // { date, text }
        let dailyRatings = {};       // "YYYY-MM-DD": rating

        let currentQuoteIndex = 0;
        const quotes = [
            { text: "The only way to do great work is to love what you do.", author: "Steve Jobs" },
            { text: "Don't watch the clock; do what it does. Keep going.", author: "Sam Levenson" },
            { text: "The future depends on what you do today.", author: "Mahatma Gandhi" },
            { text: "It does not matter how slowly you go as long as you do not stop.", author: "Confucius" },
            { text: "You are never too old to set another goal or to dream a new dream.", author: "C.S. Lewis" }
        ];

        // Calendar state
        let currentCalendarDate = new Date();

        // ---------- helpers ----------
        function getTodayString() {
            const d = new Date();
            return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`;
        }
        function formatDate(date) {
            return `${date.getFullYear()}-${String(date.getMonth()+1).padStart(2,'0')}-${String(date.getDate()).padStart(2,'0')}`;
        }

        // ---------- streak calculations (live) ----------
        function computeOverallHabitStreak() {
            let streak = 0;
            let date = new Date();
            while (true) {
                const dateStr = formatDate(date);
                const log = habitLog[dateStr];
                const anyDone = log && log.some(item => item.done);
                if (!anyDone) break;
                streak++;
                date.setDate(date.getDate() - 1);
            }
            return streak;
        }

        function computeJournalStreak() {
            let streak = 0;
            let date = new Date();
            while (true) {
                const dateStr = formatDate(date);
                const hasEntry = journalEntries.some(e => e.date === dateStr);
                if (!hasEntry) break;
                streak++;
                date.setDate(date.getDate() - 1);
            }
            return streak;
        }

        function computePerfectDays() {
            const habitIds = habits.map(h => h.id);
            if (habitIds.length === 0) return 0;
            let count = 0;
            for (const dateStr in habitLog) {
                const log = habitLog[dateStr];
                const allDone = habitIds.every(id => log.some(item => item.habitId === id && item.done));
                if (allDone) count++;
            }
            return count;
        }

        function computeHabitStreak(habitId) {
            let streak = 0;
            let date = new Date();
            while (true) {
                const dateStr = formatDate(date);
                const log = habitLog[dateStr];
                const done = log && log.some(item => item.habitId === habitId && item.done);
                if (!done) break;
                streak++;
                date.setDate(date.getDate() - 1);
            }
            return streak;
        }

        function getWeekProgress() {
            let count = 0;
            const today = new Date();
            for (let i = 0; i < 7; i++) {
                const d = new Date(today);
                d.setDate(today.getDate() - i);
                const dateStr = formatDate(d);
                const log = habitLog[dateStr];
                if (log && log.some(item => item.done)) count++;
            }
            return Math.round(count / 7 * 100);
        }

        // ---------- load / save ----------
        function loadData() {
            habits = JSON.parse(localStorage.getItem(STORAGE_KEYS.HABITS)) || [];
            habitLog = JSON.parse(localStorage.getItem(STORAGE_KEYS.HABIT_LOG)) || {};
            goals = JSON.parse(localStorage.getItem(STORAGE_KEYS.GOALS)) || [];
            transactions = JSON.parse(localStorage.getItem(STORAGE_KEYS.TRANSACTIONS)) || [];
            hobbies = JSON.parse(localStorage.getItem(STORAGE_KEYS.HOBBIES)) || [];
            events = JSON.parse(localStorage.getItem(STORAGE_KEYS.EVENTS)) || [];
            routineItems = JSON.parse(localStorage.getItem(STORAGE_KEYS.ROUTINE)) || routineItems;
            journalEntries = JSON.parse(localStorage.getItem(STORAGE_KEYS.JOURNAL)) || [];
            dailyRatings = JSON.parse(localStorage.getItem(STORAGE_KEYS.RATINGS)) || {};

            // if hobbies empty, preload 100+ default hobbies
            if (hobbies.length === 0) {
                const defaultHobbies = [
                    "Photography", "Guitar", "Piano", "Singing", "Drawing", "Painting", "Pottery", "Calligraphy",
                    "Running", "Hiking", "Cycling", "Swimming", "Yoga", "Pilates", "Weightlifting", "Boxing",
                    "Meditation", "Reading", "Writing", "Journaling", "Cooking", "Baking", "Gardening", "Bird watching",
                    "Chess", "Board games", "Video games", "Puzzles", "Crosswords", "Sudoku", "Learning languages",
                    "Coding", "3D modeling", "Video editing", "Podcasting", "Blogging", "Vlogging", "DIY projects",
                    "Woodworking", "Knitting", "Sewing", "Embroidery", "Crochet", "Macrame", "Jewelry making",
                    "Origami", "Scrapbooking", "Model building", "RC cars", "Drones", "Archery", "Fishing", "Hunting",
                    "Horseback riding", "Skiing", "Snowboarding", "Skating", "Surfing", "Kayaking", "Sailing",
                    "Traveling", "Camping", "Geocaching", "Astronomy", "Stargazing", "Meteorology", "Botany",
                    "Mycology", "Aquarium keeping", "Terrariums", "Beekeeping", "Fermenting", "Brewing", "Wine tasting",
                    "Coffee roasting", "Tea ceremony", "Calligraphy", "Book binding", "Leather crafting", "Blacksmithing",
                    "Glass blowing", "Metal detecting", "Coin collecting", "Stamp collecting", "Antiquing", "Thrifting",
                    "Fashion design", "Makeup artistry", "Nail art", "Perfumery", "Soap making", "Candle making",
                    "Pottery", "Sculpture", "Street photography", "Portrait photography", "Landscape photography",
                    "Macro photography", "Film photography", "Darkroom printing", "Digital art", "Pixel art",
                    "Animation", "Stop motion", "Voice acting", "Impersonations", "Stand-up comedy", "Improv",
                    "Magic tricks", "Juggling", "Unicycling", "Tightrope walking", "Acrobatics", "Parkour",
                    "Martial arts", "Tai chi", "Qigong", "Breathwork", "Massage", "Aromatherapy", "Herbalism"
                ];
                hobbies = defaultHobbies.map((name, i) => ({
                    id: `hobby-${i}-${Date.now()}`,
                    name,
                    category: ["Creative","Active","Relaxing","Learning","Social","Other"][i % 6],
                    status: "interested"
                }));
                localStorage.setItem(STORAGE_KEYS.HOBBIES, JSON.stringify(hobbies));
            }

            routineItems = routineItems.map((item, idx) => ({ ...item, id: item.id || `r${idx}` }));
        }

        function saveAll() {
            localStorage.setItem(STORAGE_KEYS.HABITS, JSON.stringify(habits));
            localStorage.setItem(STORAGE_KEYS.HABIT_LOG, JSON.stringify(habitLog));
            localStorage.setItem(STORAGE_KEYS.GOALS, JSON.stringify(goals));
            localStorage.setItem(STORAGE_KEYS.TRANSACTIONS, JSON.stringify(transactions));
            localStorage.setItem(STORAGE_KEYS.HOBBIES, JSON.stringify(hobbies));
            localStorage.setItem(STORAGE_KEYS.EVENTS, JSON.stringify(events));
            localStorage.setItem(STORAGE_KEYS.ROUTINE, JSON.stringify(routineItems));
            localStorage.setItem(STORAGE_KEYS.JOURNAL, JSON.stringify(journalEntries));
            localStorage.setItem(STORAGE_KEYS.RATINGS, JSON.stringify(dailyRatings));
        }

        // ---------- update header with live streaks ----------
        function updateHeader() {
            const today = getTodayString();
            const log = habitLog[today] || [];
            const doneCount = log.filter(h => h.done).length;
            document.getElementById('habitsTodayCount').textContent = `${doneCount}/${habits.length}`;
            const journalToday = journalEntries.find(j => j.date === today);
            document.getElementById('journalTodayStatus').textContent = journalToday ? 'Written' : 'Not written';
            const activeGoals = goals.filter(g => !g.completed).length;
            document.getElementById('activeGoalsCount').textContent = activeGoals;
            const balance = transactions.reduce((acc, t) => t.type === 'income' ? acc + t.amount : acc - t.amount, 0);
            document.getElementById('headerBalance').textContent = `$${balance.toFixed(2)}`;

            document.getElementById('habitStreak').textContent = computeOverallHabitStreak();
            document.getElementById('journalStreak').textContent = computeJournalStreak();
            document.getElementById('perfectDays').textContent = computePerfectDays();
        }

        // ---------- time & progress ----------
        function updateTime() {
            const now = new Date();
            document.getElementById('timeDisplay').textContent = now.toLocaleTimeString('en-US', { hour12: false });
            document.getElementById('dateDisplay').textContent = now.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });

            const start = new Date(2026, 0, 1);
            const end = new Date(2026, 11, 31);
            const total = Math.ceil((end - start) / (1000*60*60*24)) + 1;
            const today = new Date(); today.setHours(0,0,0,0);
            const dayOfYear = Math.ceil((today - start) / (1000*60*60*24)) + 1;
            const percent = ((dayOfYear / total) * 100).toFixed(1);
            document.getElementById('yearPercent').textContent = percent + '%';
            document.getElementById('yearProgressBar').style.width = percent + '%';
            document.getElementById('daysRemaining').textContent = total - dayOfYear;
            document.getElementById('dayIndicator').textContent = `Day ${dayOfYear} of 2026`;
        }

        // ---------- quotes ----------
        function changeQuote(delta) {
            currentQuoteIndex = (currentQuoteIndex + delta + quotes.length) % quotes.length;
            displayQuote();
        }
        function resetQuote() { currentQuoteIndex = 0; displayQuote(); }
        function displayQuote() {
            document.getElementById('quoteText').innerHTML = `"${quotes[currentQuoteIndex].text}"`;
            document.getElementById('quoteAuthor').innerHTML = `‚Äî ${quotes[currentQuoteIndex].author}`;
        }

        // ---------- tab switching ----------
        function switchTab(tabId) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelector(`.tab-btn[data-tab="${tabId}"]`).classList.add('active');
            document.getElementById(tabId).classList.add('active');
            if (tabId === 'habits') renderHabits();
            else if (tabId === 'goals') renderGoals();
            else if (tabId === 'money') renderMoney();
            else if (tabId === 'hobbies') renderHobbies('all');
            else if (tabId === 'schedule') renderSchedule();
            else if (tabId === 'today') renderToday();
            else if (tabId === 'calendar') renderCalendar();
            // settings tab has no dynamic render needed
        }
        function switchToHabits() { switchTab('habits'); }
        function switchToGoals() { switchTab('goals'); }
        function switchToMoney() { switchTab('money'); }

        // ---------- journal ----------
        function openJournal() {
            document.getElementById('journalModal').classList.add('active');
            const today = getTodayString();
            const entry = journalEntries.find(j => j.date === today);
            document.getElementById('journalEntry').value = entry ? entry.text : '';
            renderJournalHistory();
        }
        function closeJournal() { document.getElementById('journalModal').classList.remove('active'); }
        function usePrompt(prompt) { document.getElementById('journalEntry').value = prompt + '\n\n'; }
        function saveJournal() {
            const today = getTodayString();
            const text = document.getElementById('journalEntry').value;
            const idx = journalEntries.findIndex(j => j.date === today);
            if (idx >= 0) journalEntries[idx].text = text;
            else journalEntries.push({ date: today, text });
            saveAll();
            closeJournal();
            updateHeader();
        }
        function renderJournalHistory() {
            const historyDiv = document.getElementById('journalHistory');
            historyDiv.innerHTML = journalEntries.slice(-5).reverse().map(entry => `
                <div class="journal-entry" onclick="loadJournalEntry('${entry.date}')">
                    <div class="journal-date">${entry.date}</div>
                    <div class="journal-preview">${entry.text.substring(0,100)}${entry.text.length>100?'...':''}</div>
                </div>
            `).join('');
        }
        function loadJournalEntry(date) {
            const entry = journalEntries.find(j => j.date === date);
            if (entry) document.getElementById('journalEntry').value = entry.text;
        }

        // ---------- routine ----------
        function addRoutineItem() {
            const title = prompt('Routine item title:', 'New item');
            if (!title) return;
            routineItems.push({ id: 'r'+Date.now(), title, description: '', completed: false });
            saveAll();
            renderToday();
        }
        function toggleRoutine(id) {
            const item = routineItems.find(r => r.id === id);
            if (item) item.completed = !item.completed;
            saveAll();
            renderToday();
        }

        // ---------- daily rating ----------
        function setDayRating(rating) {
            const today = getTodayString();
            dailyRatings[today] = rating;
            saveAll();
            renderToday();
        }

        // ---------- habits (with delete) ----------
        function addHabit() {
            const name = document.getElementById('habitName').value.trim();
            if (!name) return alert('Enter habit name');
            const category = document.getElementById('habitCategory').value;
            const target = parseInt(document.getElementById('habitTarget').value);
            habits.push({ id: Date.now().toString(), name, category, target });
            saveAll();
            document.getElementById('habitName').value = '';
            renderHabits();
            updateHeader();
        }
        function toggleHabit(habitId) {
            const today = getTodayString();
            if (!habitLog[today]) habitLog[today] = [];
            const log = habitLog[today];
            const found = log.find(l => l.habitId === habitId);
            if (found) found.done = !found.done;
            else log.push({ habitId, done: true });
            saveAll();
            renderHabits();
            updateHeader();
        }
        function deleteHabit(habitId) {
            if (!confirm('Delete this habit? It will also remove all its history.')) return;
            habits = habits.filter(h => h.id !== habitId);
            for (let date in habitLog) {
                habitLog[date] = habitLog[date].filter(entry => entry.habitId !== habitId);
            }
            saveAll();
            renderHabits();
            updateHeader();
        }
        function renderHabits() {
            const container = document.getElementById('habitsList');
            container.innerHTML = habits.map(h => {
                const today = getTodayString();
                const log = habitLog[today] || [];
                const done = log.some(l => l.habitId === h.id && l.done);
                const streak = computeHabitStreak(h.id);
                return `
                    <div class="habit-card ${done?'completed':''}">
                        <button class="delete-habit" onclick="deleteHabit('${h.id}')" title="Delete habit">‚úï</button>
                        <div class="habit-header">
                            <span class="habit-title">${h.name}</span>
                            <span class="habit-streak">üî• ${streak}</span>
                        </div>
                        <div class="habit-check ${done?'checked':''}" onclick="toggleHabit('${h.id}')">${done?'‚úì':'‚óã'}</div>
                        <div class="habit-stats">
                            <span class="habit-stat">${h.category}</span>
                            <span class="habit-stat">target ${h.target}/wk</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // ---------- goals ----------
        function addGoal() {
            const title = document.getElementById('goalTitle').value.trim();
            if (!title) return alert('Enter goal title');
            const category = document.getElementById('goalCategory').value;
            const dueDate = document.getElementById('goalDueDate').value;
            goals.push({ id: Date.now().toString(), title, category, dueDate, progress: 0, completed: false });
            saveAll();
            document.getElementById('goalTitle').value = '';
            renderGoals();
        }
        function updateGoalProgress(id, val) {
            const goal = goals.find(g => g.id === id);
            if (goal) goal.progress = parseInt(val);
            saveAll();
            renderGoals();
        }
        function toggleGoalComplete(id) {
            const goal = goals.find(g => g.id === id);
            if (goal) goal.completed = !goal.completed;
            saveAll();
            renderGoals();
        }
        function renderGoals() {
            const container = document.getElementById('goalsList');
            container.innerHTML = goals.map(g => `
                <div class="goal-item">
                    <div class="goal-header">
                        <span class="goal-title">${g.title}</span>
                        <span class="goal-category cat-${g.category.toLowerCase()}">${g.category}</span>
                    </div>
                    <div class="goal-controls">
                        <div class="progress-slider">
                            <input type="range" min="0" max="100" value="${g.progress}" onchange="updateGoalProgress('${g.id}', this.value)">
                        </div>
                        <span class="progress-text">${g.progress}%</span>
                        <input type="checkbox" class="checkbox-complete" ${g.completed?'checked':''} onchange="toggleGoalComplete('${g.id}')">
                    </div>
                </div>
            `).join('');
            document.getElementById('avgProgress').textContent = (goals.reduce((acc,g)=>acc+g.progress,0)/(goals.length||1)).toFixed(0)+'%';
            document.getElementById('completedGoals').textContent = goals.filter(g=>g.completed).length;
            document.getElementById('totalGoals').textContent = goals.length;
        }

        // ---------- money ----------
        function addTransaction() {
            const desc = document.getElementById('transDesc').value.trim();
            const amount = parseFloat(document.getElementById('transAmount').value);
            if (!desc || isNaN(amount)) return alert('Fill all fields');
            const category = document.getElementById('transCategory').value;
            const type = document.getElementById('transType').value;
            transactions.push({ id: Date.now(), desc, amount, category, type, date: getTodayString() });
            saveAll();
            document.getElementById('transDesc').value = '';
            document.getElementById('transAmount').value = '';
            renderMoney();
        }
        function renderMoney() {
            const balance = transactions.reduce((acc, t) => t.type === 'income' ? acc + t.amount : acc - t.amount, 0);
            document.getElementById('balanceAmount').textContent = `$${balance.toFixed(2)}`;
            const listDiv = document.getElementById('transactionList');
            listDiv.innerHTML = transactions.slice(-10).reverse().map(t => `
                <div class="transaction-item">
                    <div class="transaction-info">
                        <div class="transaction-desc">${t.desc}</div>
                        <div class="transaction-meta">${t.category} ¬∑ ${t.date}</div>
                    </div>
                    <div class="transaction-amount ${t.type==='income'?'amount-income':'amount-expense'}">
                        ${t.type==='income'?'+':'-'}$${t.amount.toFixed(2)}
                    </div>
                </div>
            `).join('');
            const catDiv = document.getElementById('categoryBreakdown');
            const expensesByCat = transactions.reduce((acc, t) => {
                if (t.type === 'expense') acc[t.category] = (acc[t.category]||0) + t.amount;
                return acc;
            }, {});
            catDiv.innerHTML = Object.entries(expensesByCat).map(([cat, amt]) => `<span class="badge">${cat}: $${amt.toFixed(2)}</span>`).join('');
        }

        // ---------- hobbies ----------
        function addCustomHobby() {
            const name = document.getElementById('hobbyName').value.trim();
            if (!name) return alert('Enter hobby name');
            const category = document.getElementById('hobbyCategory').value;
            hobbies.push({ id: Date.now().toString(), name, category, status: 'interested' });
            saveAll();
            document.getElementById('hobbyName').value = '';
            renderHobbies('all');
        }
        function setHobbyStatus(id, status) {
            const hobby = hobbies.find(h => h.id === id);
            if (hobby) hobby.status = status;
            saveAll();
            renderHobbies(document.querySelector('.filter-btn.active')?.textContent.toLowerCase() || 'all');
        }
        function filterHobbies(filter, btn) {
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            renderHobbies(filter);
        }
        function renderHobbies(filter) {
            const filtered = hobbies.filter(h => filter === 'all' || h.status === filter);
            const container = document.getElementById('hobbiesList');
            container.innerHTML = filtered.map(h => `
                <div class="hobby-item">
                    <div class="hobby-name">${h.name}</div>
                    <div class="hobby-category">${h.category}</div>
                    <div class="hobby-status">
                        <button class="status-btn status-interested ${h.status==='interested'?'active':''}" onclick="setHobbyStatus('${h.id}','interested')">Interested</button>
                        <button class="status-btn status-trying ${h.status==='trying'?'active':''}" onclick="setHobbyStatus('${h.id}','trying')">Trying</button>
                        <button class="status-btn status-mastered ${h.status==='mastered'?'active':''}" onclick="setHobbyStatus('${h.id}','mastered')">Mastered</button>
                    </div>
                </div>
            `).join('');
        }

        // ---------- schedule ----------
        function addEvent() {
            const title = document.getElementById('eventTitle').value.trim();
            const date = document.getElementById('eventDate').value;
            if (!title || !date) return alert('Enter title and date');
            events.push({ id: Date.now().toString(), title, date });
            saveAll();
            document.getElementById('eventTitle').value = '';
            document.getElementById('eventDate').value = '';
            renderSchedule();
        }
        function renderSchedule() {
            const container = document.getElementById('eventsList');
            const sorted = [...events].sort((a,b)=>new Date(a.date)-new Date(b.date));
            container.innerHTML = sorted.map(e => {
                const today = new Date(); today.setHours(0,0,0,0);
                const evDate = new Date(e.date);
                const diff = Math.ceil((evDate - today) / (1000*60*60*24));
                const passed = diff < 0;
                const isToday = diff === 0;
                return `
                    <div class="event-item ${passed?'event-passed':''} ${isToday?'event-today':''}">
                        <div class="event-date-box">
                            <div class="event-day">${evDate.getDate()}</div>
                            <div class="event-month">${evDate.toLocaleString('default',{month:'short'})}</div>
                        </div>
                        <div class="event-details">
                            <div class="event-title">${e.title}</div>
                            <div class="event-countdown-large">${isToday?'Today':passed?'Passed':`${diff} days left`}</div>
                        </div>
                    </div>
                `;
            }).join('');
            const preview = document.getElementById('eventsPreview');
            preview.innerHTML = sorted.slice(0,3).map(e => {
                const evDate = new Date(e.date);
                const diff = Math.ceil((evDate - new Date())/(1000*60*60*24));
                return `<div class="event-preview-item"><span>${e.title}</span><span class="event-countdown">${diff<0?'passed':diff===0?'today':diff+'d'}</span></div>`;
            }).join('') || 'No upcoming events';
        }

        // ---------- calendar ----------
        function changeMonth(delta) {
            currentCalendarDate.setMonth(currentCalendarDate.getMonth() + delta);
            renderCalendar();
        }
        function renderCalendar() {
            const year = currentCalendarDate.getFullYear();
            const month = currentCalendarDate.getMonth();
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const startDayOfWeek = firstDay.getDay();
            const totalDays = lastDay.getDate();

            document.getElementById('calendarMonthYear').textContent = firstDay.toLocaleDateString('default', { month: 'long', year: 'numeric' });

            let gridHtml = '';
            const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
            dayNames.forEach(d => gridHtml += `<div class="calendar-day-header">${d}</div>`);

            for (let i = 0; i < startDayOfWeek; i++) {
                gridHtml += `<div class="calendar-cell" style="background: transparent; box-shadow: none;"></div>`;
            }

            const todayStr = getTodayString();

            for (let d = 1; d <= totalDays; d++) {
                const date = new Date(year, month, d);
                const dateStr = formatDate(date);
                const isToday = dateStr === todayStr;

                const hasHabit = habitLog[dateStr] && habitLog[dateStr].some(l => l.done);
                const hasJournal = journalEntries.some(e => e.date === dateStr);
                const hasMoney = transactions.some(t => t.date === dateStr);
                const hasRating = dailyRatings[dateStr] !== undefined;

                gridHtml += `
                    <div class="calendar-cell ${isToday ? 'today' : ''}" onclick="showDayDetail('${dateStr}')">
                        <div class="calendar-day-number">${d}</div>
                        <div class="calendar-dots">
                            ${hasHabit ? '<span class="dot habit" title="Habit done"></span>' : ''}
                            ${hasJournal ? '<span class="dot journal" title="Journal entry"></span>' : ''}
                            ${hasMoney ? '<span class="dot money" title="Transaction"></span>' : ''}
                            ${hasRating ? '<span class="dot rating" title="Rating"></span>' : ''}
                        </div>
                    </div>
                `;
            }

            document.getElementById('calendarGrid').innerHTML = gridHtml;
        }

        function showDayDetail(dateStr) {
            const modal = document.getElementById('dayDetailModal');
            document.getElementById('detailDateTitle').textContent = `üìÖ ${dateStr}`;

            const habitDone = habitLog[dateStr] ? habitLog[dateStr].filter(l => l.done).map(l => {
                const habit = habits.find(h => h.id === l.habitId);
                return habit ? habit.name : 'Unknown';
            }) : [];

            const journal = journalEntries.find(e => e.date === dateStr);
            const transactionsDay = transactions.filter(t => t.date === dateStr);
            const rating = dailyRatings[dateStr];

            let html = `
                <div class="detail-section">
                    <h4>‚úÖ Habits done</h4>
                    ${habitDone.length ? habitDone.map(h => `<div>‚Ä¢ ${h}</div>`).join('') : '<div>None</div>'}
                </div>
                <div class="detail-section">
                    <h4>üìù Journal</h4>
                    ${journal ? `<p>${journal.text.substring(0,200)}${journal.text.length>200?'...':''}</p>` : '<p>No entry</p>'}
                </div>
                <div class="detail-section">
                    <h4>üí∞ Transactions</h4>
                    ${transactionsDay.length ? transactionsDay.map(t => `<div>${t.desc}: $${t.amount} (${t.type})</div>`).join('') : '<div>None</div>'}
                </div>
                <div class="detail-section">
                    <h4>‚≠ê Rating</h4>
                    ${rating ? `<div>${'üò´üòïüòêüôÇü§©'[rating-1]} (${rating}/5)</div>` : '<div>Not rated</div>'}
                </div>
            `;

            document.getElementById('dayDetailBody').innerHTML = html;
            modal.classList.add('active');
        }

        function closeDayDetail() {
            document.getElementById('dayDetailModal').classList.remove('active');
        }

        // ---------- today tab ----------
        function renderToday() {
            const routineDiv = document.getElementById('morningRoutine');
            routineDiv.innerHTML = routineItems.map(item => `
                <div class="routine-item ${item.completed?'completed':''}" onclick="toggleRoutine('${item.id}')">
                    <div class="routine-checkbox">${item.completed?'‚úì':''}</div>
                    <div class="routine-content">
                        <div class="routine-title">${item.title}</div>
                        <div class="routine-desc">${item.description || ' '}</div>
                    </div>
                </div>
            `).join('');

            const today = getTodayString();
            const rating = dailyRatings[today];
            document.getElementById('todayRatingDisplay').innerHTML = rating ? `Today's rating: ${'üò´üòïüòêüôÇü§©'[rating-1]}` : 'No rating yet.';

            const focus = localStorage.getItem(STORAGE_KEYS.FOCUS) || 'Set your daily focus';
            document.getElementById('insightFocus').textContent = focus;
            document.getElementById('insightEvent').textContent = events.length ? events[0].title : 'No upcoming events';
            document.getElementById('insightMotivation').textContent = 'Keep up the great work!';

            const habitsDone = habitLog[today]?.filter(l=>l.done).length || 0;
            const journalWords = journalEntries.find(j=>j.date===today)?.text.split(/\s+/).length || 0;
            const spentToday = transactions.filter(t=>t.date===today && t.type==='expense').reduce((acc,t)=>acc+t.amount,0);
            document.getElementById('todayHabitsDone').textContent = habitsDone;
            document.getElementById('todayJournalWords').textContent = journalWords;
            document.getElementById('todayExpenses').textContent = `$${spentToday.toFixed(2)}`;
            document.getElementById('weekProgress').textContent = getWeekProgress() + '%';
        }

        // ---------- focus ----------
        function saveFocus() {
            localStorage.setItem(STORAGE_KEYS.FOCUS, document.getElementById('todayFocus').value);
        }

        // ---------- personal name ----------
        function setUserName() {
            const name = document.getElementById('userNameInput').value.trim();
            if (name) {
                localStorage.setItem(STORAGE_KEYS.USER_NAME, name);
                document.getElementById('personalNameDisplay').textContent = name + "'s Dashboard";
            }
        }
        function loadUserName() {
            const name = localStorage.getItem(STORAGE_KEYS.USER_NAME);
            if (name) {
                document.getElementById('personalNameDisplay').textContent = name + "'s Dashboard";
                document.getElementById('userNameInput').value = name;
            }
        }

        // ---------- background customization (fixed) ----------
        function handleBgUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const bgUrl = e.target.result;
                    localStorage.setItem(STORAGE_KEYS.BG_IMAGE, bgUrl);
                    applyBg();
                };
                reader.readAsDataURL(file);
            }
        }
        function changeBgFit(fit) {
            localStorage.setItem(STORAGE_KEYS.BG_FIT, fit);
            applyBg();
        }
        function resetBg() {
            localStorage.removeItem(STORAGE_KEYS.BG_IMAGE);
            localStorage.removeItem(STORAGE_KEYS.BG_FIT);
            document.body.classList.remove('custom-bg');
            document.body.style.background = ''; // revert to default gradient
            // reset background to default gradient
            document.body.style.background = 'linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%)';
            document.body.style.backgroundAttachment = 'fixed';
        }
        function applyBg() {
            const bg = localStorage.getItem(STORAGE_KEYS.BG_IMAGE);
            const fit = localStorage.getItem(STORAGE_KEYS.BG_FIT) || 'cover';
            if (bg) {
                document.body.style.setProperty('--user-bg', `url('${bg}')`);
                document.body.style.setProperty('--bg-size', fit);
                document.body.classList.add('custom-bg');
                // remove default gradient from body style
                document.body.style.background = 'none';
            } else {
                resetBg();
            }
        }

        // ---------- init ----------
        window.onload = function() {
            loadData();
            updateTime();
            displayQuote();
            updateHeader();
            renderToday();
            renderHabits();
            renderGoals();
            renderMoney();
            renderHobbies('all');
            renderSchedule();
            renderCalendar();
            loadUserName();
            applyBg();
            setInterval(updateTime, 1000);
        };
    </script>
</body>
</html>
